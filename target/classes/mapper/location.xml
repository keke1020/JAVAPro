<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mp.dao.locationDao">
	<resultMap type="location" id="locationResult">
		<id column="ID" property="ID" jdbcType="INTEGER" />
		<result column="update" property="update" jdbcType="TIMESTAMP" />
		<result column="code" property="code" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="tag" property="tag" jdbcType="VARCHAR" />
		<result column="dcode" property="dcode" jdbcType="VARCHAR" />
		<result column="sw" property="sw" jdbcType="VARCHAR" />
		<result column="sw2" property="sw2" jdbcType="VARCHAR" />
		<result column="kaisou" property="kaisou" jdbcType="VARCHAR" />
		<result column="tana" property="tana" jdbcType="VARCHAR" />
		<result column="ksize" property="ksize" jdbcType="VARCHAR" />
		<result column="sp" property="sp" jdbcType="VARCHAR" />
		<result column="t_kbn" property="t_kbn" jdbcType="VARCHAR" />
		<result column="user" property="user" jdbcType="VARCHAR" />
		<result column="flag" property="flag" jdbcType="VARCHAR" />
		<result column="moto" property="moto" jdbcType="VARCHAR" />
		<result column="zaiko" property="zaiko" jdbcType="INTEGER" />
		<result column="hikiate" property="hikiate" jdbcType="INTEGER" />
		<result column="yoyaku" property="yoyaku" jdbcType="VARCHAR" />
		<result column="zaiko_update" property="zaiko_update" jdbcType="TIMESTAMP" />
		<result column="sZaiko" property="sZaiko" jdbcType="INTEGER" />
		<result column="sBikou" property="sBikou" jdbcType="VARCHAR" />
		<result column="sTanto" property="sTanto" jdbcType="VARCHAR" />
	</resultMap>

	<select id="getlocation" resultMap="locationResult">
		 SELECT
			ID,
			`UPDATE`,
			`CODE`,
			`name`,
			tag,
			dcode,
			sw,
			sw2,
			kaisou,
			tana,
			ksize,
			sp,
			t_kbn,
			`user`,
			flag,
			moto,
			zaiko,
			hikiate,
			yoyaku,
			zaiko_update,
			sZaiko,
			sBikou,
			sTanto
		FROM
			location
		WHERE
			(`update` >= '0000-00-00')
		<choose>
			<when test="orderSC == '順序選択' ">
				order by `update` desc
			</when>
			<when test="orderSC == 'アップデート順' ">
				order by `update` desc
			</when>
			<when test="orderSC == 'コード昇順' ">
				order by `code`
			</when>
			<when test="orderSC == 'コード降順' ">
				order by `code` desc
			</when>
			<when test="orderSC == '棚番昇順' ">
				order by `tana`
			</when>
		</choose>
		LIMIT #{offset}, #{limit}
	</select>

	<select id="getTotal" resultType="java.lang.Integer">
		SELECT
			count(*)
		FROM
			location
		WHERE
			(`update` >= '0000-00-00')
		<choose>
			<when test="orderSC == '順序選択' ">
				order by `update` desc
			</when>
			<when test="orderSC == 'アップデート順' ">
				order by `update` desc
			</when>
			<when test="orderSC == 'コード昇順' ">
				order by `code`
			</when>
			<when test="orderSC == 'コード降順' ">
				order by `code` desc
			</when>
			<when test="orderSC == '棚番昇順' ">
				order by `tana` desc
			</when>
		</choose>
	</select>


</mapper>