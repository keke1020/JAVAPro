<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mp.dao.userDao">
	<resultMap type="user" id="userResult">
		<id column="ID" property="ID" jdbcType="INTEGER" />
		<result column="realname" property="realname" jdbcType="VARCHAR" />
		<result column="password" property="password" jdbcType="VARCHAR" />
		<result column="adminFlag" property="adminFlag" jdbcType="INTEGER" />
		<result column="plan_contr" property="plan_contr" jdbcType="INTEGER" />
		<result column="plan_priv" property="plan_priv" jdbcType="INTEGER" />
	</resultMap>

	<!-- dao接口方法提供sql语句配置 -->
	<select id="login" resultMap="userResult">
		select * from user where password = #{password}
	</select>

	<select id="getUsersConfig" resultMap="userResult">
		select * from user order by realname
		LIMIT #{offset}, #{limit}
	</select>

	<select id="getTotal" resultType="java.lang.Integer">
		select count(*) from user
	</select>

	<select id="getUsersConfigById" resultMap="userResult">
		select * from user
		where ID = #{id}
	</select>

	<update id="setUserPlan_priv" parameterType="com.mp.entity.user">
		UPDATE `user` set plan_priv = 0;
		UPDATE `user` set plan_priv = 1
		WHERE
		`ID` in
		<foreach collection="ids" item="id" index="index" open="("
			close=")" separator=",">
			#{id}
		</foreach>
	</update>

	<update id="updateUserConfig" parameterType="com.mp.entity.user">
		UPDATE `user`
		<set>
			plan_contr = #{plan_contr}
		</set>
		where ID = #{ID}
	</update>


</mapper>